$(document).ready(function(){document.body.addEventListener("touchstart",function(){},{passive:!0});var o,a,s,n,t,e,i=$(".g-nav"),c=$("meta[property='og:baseurl']").attr("content"),l=$(".g-logo"),r=$(".g-banner").attr("data-theme");function d(){$(".table-of-contents").toggleClass("active"),"night"==C("mode")?($(".mobile-list .icon.list.night").toggleClass("active"),$(".mobile-list .icon.exit.night").toggleClass("active")):($(".mobile-list .icon.list.day").toggleClass("active"),$(".mobile-list .icon.exit.day").toggleClass("active"))}l.css({background:"url("+c+"/assets/icons/"+r+".svg) no-repeat center","background-size":"100% 100%"}),C("cookieconsent_status")?$(".cookie-tip").removeClass("active"):$(".cookie-tip").addClass("active"),$("#accept-tos").on("click",function(){w("cookieconsent_status","allow",365),$(".cookie-tip").removeClass("active")}),$("table").wrap("<div class='table-area'></div>"),$("#menu-toggle").on("click",function(t){i.slideToggle(200),$(document).on("click",function(){i.slideUp(200)}),t.stopPropagation()}),i.on("click",function(t){t.stopPropagation()}),$(".g-nav li.dropdown").on("click",function(){$(".g-nav li.dropdown").not($(this)).children("ul.dropdown-menu").removeClass("show"),$(".g-nav li.dropdown").not($(this)).children("a.dropdown-toggle").removeClass("show"),$(this).children("a.dropdown-toggle").toggleClass("show"),$(this).children("ul.dropdown-menu").toggleClass("show")}),$(document).on("click",function(){$(".g-nav li.dropdown").children("a.dropdown-toggle").removeClass("show"),$(".g-nav li.dropdown").children("ul.dropdown-menu").removeClass("show")}),695<$(window).width()?(s=(a=$(".g-header")).outerHeight(),o=i.find("a"),n=$(document).scrollTop(),l=$(".g-logo"),r=$(".g-banner").attr("data-theme"),$(document).scroll(function(){var t=$(this).scrollTop(),e="nav-"+r;s<t?(3*s<t&&a.addClass("headerUp"),a.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),l.css({background:"url("+c+"/assets/icons/"+r+".svg) no-repeat center","background-size":"100% 100%"}),o.css("color","#666"),i.addClass(e)):(a.removeClass("headerUp"),$("#bttb").removeClass("active"),a.css({"background-color":"transparent","box-shadow":"none"}),l.css({background:"url("+c+"/assets/icons/"+r+".svg) no-repeat center","background-size":"100% 100%"}),o.css("color","#fff"),i.removeClass(e)),t<n?(a.addClass("headerDown"),a.hasClass("headerUp")&&$("#bttb").addClass("active")):(a.removeClass("headerDown"),$("#bttb").removeClass("active")),n=t})):(s=(a=$(".g-header")).outerHeight(),n=$(document).scrollTop(),$(document).scroll(function(){var t=$(this).scrollTop();t<100&&$("#bttb").removeClass("active"),t<n&&5<n?$("#bttb").addClass("active"):$("#bttb").removeClass("active"),n=t})),$(".mobile-list").bind("click",function(){d()}),$(".table-of-contents").on("click",function(){d()}),$(".bttb").bind("click",function(){$("html,body").animate({scrollTop:0},function(){$("#bttb").removeClass("active")})}),$(".read-next-item section").each(function(){var t=$(this).height(),e=$(".read-next-item").height();$(this).css("margin-top",(e-t)/2+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){var t,e,o,a,s,n;t=$(this),e=$(".read-next-item"),o=t.width(),a=e.width(),s=t.height(),n=e.height(),s<n?(t.css({width:"auto",height:"100%"}),o=t.width(),a=e.width(),t.css("margin-left","-"+(o-a)/2+"px")):t.css("margin-top",(n-s)/2+"px"),t.fadeIn(),$(this).attr("data-src",$(this).attr("src")).removeAttr("src").addClass("lazyload")});for(var g=parseInt($("#total_pages").val()),h=parseInt($("#current_pages").val()),u=$("#base_url").val(),p="",v=h-3;v<h;v++)0<v&&1!==v?p+='<a href="'+u+"page"+v+'/index.html" class="page-link page-num">'+v+"</a>":1===v&&(p+='<a href="'+u+'" class="page-link page-num">'+v+"</a>");p+='<span class="page-link page-num active">'+h+"</span>";for(var m=h+1;m<=h+3;m++)m<=g&&(p+='<a href="'+u+"page"+m+'/index.html" class="page-link page-num">'+m+"</a>");function f(){var o,a,s,t=$("#search_input"),e=$(".search_result");t.focus(function(){$(".icon-search").css("color","#3199DB"),e.show()}),t.keyup((o=this.autoComplete,a=a||120,function(){var t=this,e=arguments;clearTimeout(s),s=setTimeout(function(){o.apply(t,e)},a)})),$(document).click(function(t){"search_input"!==t.target.id&&"search_result"!==t.target.className&&"search_item"!==t.target.className&&($(".icon-search").css("color","#CAD3DC"),e.hide())})}function b(){var t=$("article :header"),e=$(".table-of-contents").find("a"),o=$(window).scrollTop();0<o&&$(".g-header").addClass("headerUp");for(var a=0;a<t.length;a++)$(t[a]).offset().top-100<o&&($(e).removeClass("active"),$(e[a]).addClass("active"))}function C(t){for(var e=t+"=",o=document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a].trim();if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""}function w(t,e,o){var a=new Date,o=(a.setTime(a.getTime()+24*o*60*60*1e3),"expires="+a.toGMTString());document.cookie=c?t+"="+e+"; path="+c+"; "+o:t+"="+e+"; path=/; "+o}function k(){var t=C("mode");""==t||"day"==t?(w("mode","night",1),$("body").addClass("night-mode")):(w("mode","day",1),$("body").removeClass("night-mode")),0<$("#disqus_thread").length&&DISQUS.reset({reload:!0}),$(".g-nav li.mode .icon").toggleClass("active"),$("#mode-toggle .icon").toggleClass("active"),$(".icon.up.day").toggleClass("active"),$(".icon.up.night").toggleClass("active"),"visible"==$(".table-of-contents").css("visibility")?($(".icon.exit.day").toggleClass("active"),$(".icon.exit.night").toggleClass("active")):($(".icon.list.day").toggleClass("active"),$(".icon.list.night").toggleClass("active"))}$("#page-link-container").html(p),f.prototype.autoComplete=function(){var i=this.value.toLowerCase(),t=(i.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),c+"/assets/search.json");$.getJSON(t).done(function(t){var e,o="";for(e in t){var a=t[e],s=a.title,n=a.tags;a.url;""!==i&&0<=(s+n).toLowerCase().indexOf(i)&&(o+='<a class="search_item" href="'+a.url+'">'+a.title+"</a>")}$(".search_result").html(o)})},new f,"true"===$("#nm-switch").val()&&($("body"),t=(new Date).getHours(),""==(e=C("mode"))&&(console.log(e),(t<=6||18<=t)&&(console.log("Start night mode"),w("mode","night",1)))),$(".post-content").on("mouseup",function(t){var e,o=window.getSelection();30<=o.toString().length&&(e=o,e+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(t){(window.clipboardData||t.originalEvent.clipboardData).setData("text/plain",e),t.preventDefault()}))}),b(),$(window).bind("scroll",b),"night"==C("mode")?($(".g-nav li.mode .night").addClass("active"),$("#mode-toggle .icon-night").addClass("active"),$("body").addClass("night-mode"),$(".icon.up.night").toggleClass("active"),$(".icon.list.night").toggleClass("active")):($(".g-nav li.mode .day").addClass("active"),$("#mode-toggle .icon-day").addClass("active"),$("body").removeClass("night-mode"),$(".icon.up.day").toggleClass("active"),$(".icon.list.day").toggleClass("active")),$(".g-nav li.mode").click(function(){k()}),$("#mode-toggle").click(function(){k()}),$("pre").each(function(t){t="codeblock"+(t+1);$(this).attr("id",t);t='<div class="copy-container"><span class="lang">'+$(this).attr("class").split(" ")[1].substring(9).toUpperCase()+'</span><button class="btn" data-bs-original-title="Copy" aria-label="Copy" data-clipboard-target="#'+t+'"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-copy"></use></svg><span class="tooltip unfinish">Copy</span><span class="tooltip finish">Copied</span></button></div>';$(this).before(t)}),new ClipboardJS(".btn").on("success",function(t){t.clearSelection()}),$(".markdown-body .btn").hover(function(){$(this).find(".tooltip.unfinish").addClass("active")},function(){$(this).find(".tooltip.unfinish").removeClass("active")}),$(".markdown-body .btn").click(function(){$(this).find(".tooltip.unfinish").removeClass("active");var t=$(this).find(".tooltip.finish");t.addClass("active"),setTimeout(function(){t.removeClass("active")},500)}),document.addEventListener("error",function(t){"IMG"==t.target.nodeName&&(t.target.src=c+"/assets/img/placeholder.webp")},!0)});